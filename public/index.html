<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Thomas Archive | Watch & Explore</title>
    <meta name="description" content="Complete collection of Thomas the Tank Engine episodes, specials, and fan-made content." />
    
    <!-- CSS -->
    <link rel="stylesheet" href="/style.css" />
    <link rel="icon" href="https://i.ibb.co/SDBYYshc/image-2025-07-09-212116843.png" type="image/png" />

    <!-- Core Setup -->
    <script>
        // Set global language for scripts (Defaults to en-gb if not found in URL)
        const pathMatch = window.location.pathname.match(/^\/([a-z]{2}-[a-z]{2})(\/|$)/i);
        window.LANG_CODE = pathMatch ? pathMatch[1].toLowerCase() : "en-gb";
    </script>
</head>

<body>
    <!-- Terms Modal -->
    <div id="terms-modal" class="modal" role="dialog" aria-modal="true" style="display:none; z-index:9999;">
        <div class="modal-content" style="max-width:500px; height:auto; padding:2rem; background:white; text-align:center;">
            <h2 style="color:#005eb8;">Welcome Aboard! üöÇ</h2>
            <p style="color:#333; margin:1rem 0;">Before entering, you must agree to our <a href="/terms-of-use.html" style="color:#005eb8;">Terms of Use</a>.</p>
            <button id="accept-terms" class="queue-btn">I Accept</button>
        </div>
    </div>

    <header>
        <div class="container">
            <h1>Thomas Archive</h1>
            <p>A comprehensive collection of episodes, specials, and fan creations</p>
            
            <section id="join-discord">
                <div style="display: flex; align-items: center; gap: 10px;">
                    <div id="discord-avatars"></div>
                    <!-- Added ID for discordWidget.js -->
                    <span id="discord-stats" style="font-size: 0.9rem; opacity: 0.9;">Connecting...</span>
                </div>
                <div style="display: flex; gap: 10px;">
                    <a id="discord-invite" href="https://discord.gg/" target="_blank">üöÇ Join Discord</a>
                    <a href="#" class="like-button" style="background:#ff4757; padding:0.4rem 1rem; border-radius:6px; color:white; font-weight:bold; text-decoration:none;">‚ù§Ô∏è Like</a>
                </div>
            </section>
        </div>
    </header>

    <main>
        <!-- Episodes Section -->
        <section id="episodes">
            <!-- ID added for funnySounds.js -->
            <h2 id="episodes-heading">Episodes</h2>
            
            <!-- Scripts (episodes.js) will inject the .series-selector here -->
            <!-- Scripts will populate #episode-list -->
            <div id="episode-list"></div>
        </section>

        <!-- DVD Collection -->
        <section id="dvd-collection">
            <h2>DVD Collection</h2>
            <p>Select a DVD case to play the full disc queue.</p>
            
            <!-- Scripts (dvdPlayer.js) will populate .dvd-grid -->
            <div class="dvd-grid"></div>
        </section>

        <!-- Games -->
        <section id="games">
            <h2>Games</h2>
            <!-- Scripts (funnySounds.js) target #games > h2 -->
            <div class="game-grid">
                <div class="game-item">
                    <a href="#" onclick="openVideo('/games/design-your-engine.html'); return false;">
                        <img src="https://i.ibb.co/RVTz5bL/Game-Promo-Sm-Design-Your-Train.jpg" alt="Design Your Engine" />
                        <strong>Design Your Engine</strong>
                    </a>
                </div>
            </div>
        </section>

        <!-- Stats -->
        <section id="completion-stats">
            <h2>Completion Progress</h2>
            <div class="completion-item">
                <span>UK English Dub</span>
                <div class="progress-bar">
                    <div class="progress-fill" style="width: 100%;">100%</div>
                </div>
            </div>
            <div class="completion-item">
                <span>US English Dub</span>
                <div class="progress-bar">
                    <div class="progress-fill" style="width: 9.1%;">9.1%</div>
                </div>
            </div>
        </section>

        <!-- Credits -->
        <section id="credits">
            <h2>Special Thanks</h2>
            <div class="credits-grid">
                <div class="credit-item">
                    <img src="https://i.ibb.co/1f92j2FV/8c353d9155de9a11d9d86f7e6ad831e9.webp" alt="foxStorm1">
                    <strong>foxStorm1</strong>
                </div>
                <div class="credit-item">
                    <img src="https://i.ibb.co/zhXz8w1X/10f4845240de63414acf4b856b7a68b7.webp" alt="koreandub">
                    <strong>koreandub</strong>
                </div>
                 <div class="credit-item">
                    <img src="https://i.ibb.co/jvsd53Kc/0af0796b865c1f13d7ca3c587034fb0c.webp" alt="talez_chip">
                    <strong>talez_chip</strong>
                </div>
            </div>
        </section>
    </main>

    <footer>
        <div class="container">
            <p>
                &copy; 2025 Thomas Archive. Fan-made and unaffiliated.<br />
                <a href="/terms-of-use.html">Terms of Use</a>
            </p>
        </div>
    </footer>

    <!-- Universal Video Modal -->
    <!-- Structure required by dvdPlayer.js & episodes.js -->
    <div id="video-modal" class="modal hidden">
        <div class="modal-content">
            <button id="modal-close" aria-label="Close video modal">&times;</button>
            <div id="title-shield"></div>
            <div id="queue-status"></div>
            <iframe id="modal-video" title="Video player" allow="autoplay; fullscreen" allowfullscreen></iframe>
            <div id="modal-controls">
                <button id="btn-prev" class="queue-btn">‚èÆ Prev</button>
                <button id="btn-next" class="queue-btn">Next ‚è≠</button>
            </div>
        </div>
    </div>

    <!-- Scripts -->
    <script src="/scripts/geoRedirect.js"></script> <!-- Run early -->
    <script src="/scripts/discordWidget.js" defer></script>
    <script src="/scripts/episodes.js" defer></script>
    <script src="/scripts/dvdPlayer.js" defer></script>
    <script src="/scripts/funnySounds.js" defer></script>
    <script src="/scripts/main.js" defer></script> <!-- Terms Modal Logic -->
</body>
</html>
